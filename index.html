<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutor Reveal - Select Problem</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 18px;
            opacity: 0.9;
        }

        .problem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .problem-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .problem-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .problem-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .problem-subject {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .problem-id {
            color: #999;
            font-size: 12px;
        }

        .problem-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .problem-topic {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .problem-preview {
            color: #4a5568;
            font-size: 14px;
            line-height: 1.6;
                        max-height: 80px;
            overflow: hidden;
            position: relative;
        }

        .problem-preview::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: linear-gradient(transparent, white);
        }

        .problem-meta {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            font-size: 13px;
            color: #666;
        }

        .add-problem {
            background: white;
            border: 3px dashed #667eea;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 250px;
        }

        .add-problem:hover {
            background: #f7fafc;
            border-color: #5568d3;
        }

        .add-problem-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .add-problem-text {
            color: #667eea;
            font-size: 18px;
            font-weight: 600;
        }

        .instructions {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .instructions h2 {
            color: #2d3748;
            margin-bottom: 20px;
        }

        .instructions ol {
            padding-left: 25px;
        }

        .instructions li {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #4a5568;
        }

        .instructions code {
            background: #f7fafc;
            padding: 2px 8px;
            border-radius: 4px;
            color: #667eea;
            font-family: 'Courier New', monospace;
        }

        .example-box {
            background: #fffaf0;
            border-left: 4px solid #ed8936;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .firebase-setup {
            background: #f0fff4;
            border: 2px solid #48bb78;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .firebase-setup h3 {
            color: #22543d;
            margin-bottom: 15px;
        }

        .firebase-setup ol {
            padding-left: 20px;
            color: #2d3748;
        }

        .firebase-setup li {
            margin-bottom: 10px;
        }

        .firebase-setup .warning {
            background: #fed7d7;
            color: #c53030;
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
        }
    </style>
    </head>
    
    <body>
        <div class="container">
            <div class="header">
                <h1>üìö Tutor Reveal</h1>
                <p class="subtitle">Select a problem to start teaching</p>
            </div>
    
            <div class="problem-grid" id="problemGrid">
                <!-- Problems will be loaded here -->
                <div class="add-problem" onclick="showInstructions()">
                    <div class="add-problem-icon">‚ûï</div>
                    <div class="add-problem-text">Add New Problem</div>
                    <p style="color: #999; font-size: 14px; margin-top: 10px;">
                        Click for instructions
                    </p>
                </div>
            </div>
    
            <div class="instructions">
                <h2>üìñ How to Add Problems</h2>
                <ol>
                    <li>
                        <strong>Copy your problem</strong> (just the text, like your physics question)
                    </li>
                    <li>
                        <strong>Ask Claude:</strong>
                        <div class="example-box">
                            <em>"Hey Claude, format this problem for my Tutor Reveal app:"</em><br>
                            [paste your problem here]
                        </div>
                    </li>
                    <li>
                        <strong>Claude will give you a file</strong> like <code>forces-1.js</code>
                    </li>
                    <li>
                        <strong>Save it in the <code>problems/</code> folder</strong>
                    </li>
                    <li>
                        <strong>Add it to <code>problems/index.js</code></strong>:
                        <div class="example-box">
                            <code>import newProblem from './new-problem.js';</code><br>
                            <code>export const problems = [forces1, newProblem];</code>
                        </div>
                    </li>
                    <li>
                        <strong>Refresh this page</strong> - your problem appears! üéâ
                    </li>
                </ol>
    
                <h3 style="margin-top: 30px; color: #2d3748;">Example Problem to Try:</h3>
                <div class="example-box" style="background: #f0fff4; border-color: #48bb78;">
                    <strong>Just send me this:</strong><br><br>
                    <em>"Format this for my app:"</em><br><br>
                    <code style="background: white; display: block; padding: 10px; white-space: pre-wrap;">7. Suppose the only horizontal forces acting on a 20-N object on a smooth table are 36 N [45¬∞] and 60 N [125¬∞].
    (a) What is the net force acting on the object?
    (b) Calculate the acceleration of the object</code>
                </div>
    
                <div class="firebase-setup">
                    <h3>üî• Firebase Setup Required</h3>
                    <p style="margin-bottom: 15px;">To enable real-time syncing across devices, you need to set up Firebase:
                    </p>
                    <ol>
                        <li>Go to <a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a></li>
                        <li>Create a new project (or use existing)</li>
                        <li>Create a Realtime Database (start in test mode)</li>
                        <li>Go to Project Settings ‚Üí Your apps ‚Üí Add a web app</li>
                        <li>Copy the config values and paste them in <code>firebase-config.js</code></li>
                    </ol>
                    <div class="warning">
                        ‚ö†Ô∏è <strong>Important:</strong> The app won't sync between devices until you add your Firebase
                        config!
                    </div>
                </div>
            </div>
        </div>
    
        <script type="module">
            import { problems } from './problems/index.js';

            async function loadProblems() {
                const grid = document.getElementById('problemGrid');
                const addButton = grid.querySelector('.add-problem');

                problems.forEach(problem => {
                    const card = createProblemCard(problem);
                    grid.insertBefore(card, addButton);
                });
            }

            function createProblemCard(problem) {
                const card = document.createElement('div');
                card.className = 'problem-card';
                card.onclick = () => startSession(problem);

                card.innerHTML = `
                    <div class="problem-header">
                        <span class="problem-subject">${problem.subject || 'General'}</span>
                        <span class="problem-id">${problem.id}</span>
                    </div>
                    <div class="problem-title">${problem.title}</div>
                    <div class="problem-topic">${problem.topic}</div>
                    <div class="problem-preview">${problem.question}</div>
                    <div class="problem-meta">
                        <span>üìù ${problem.steps.length} steps</span>
                    </div>
                `;

                return card;
            }

            function startSession(problem) {
                // Save problem to sessionStorage
                const sessionId = Math.random().toString(36).substring(2, 8).toUpperCase();
                sessionStorage.setItem('current_problem', JSON.stringify(problem));
                sessionStorage.setItem('session_id', sessionId);

                // Go to presenter view
                window.location.href = `presenter.html`;
            }

            window.showInstructions = function () {
                document.querySelector('.instructions').scrollIntoView({ behavior: 'smooth' });
            };

            // Load problems on page load
            loadProblems();
        </script>
    </body>
    
    </html>